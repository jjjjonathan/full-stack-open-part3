(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){"use strict";t.r(n);var c=t(17),o=t.n(c),r=t(18),u=t(8),a=t(3),i=t(1),s=t(5),b=t.n(s),d="/api/persons",j=function(){return b.a.get(d)},l=function(e){return b.a.post(d,e)},f=function(e){return b.a.delete("".concat(d,"/").concat(e))},h=function(e){return b.a.put("".concat(d,"/").concat(e.id),e)},m=t(0),O=function(e){var n=e.persons,t=e.query,c=e.onDeleteClick,o=t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):n;return Object(m.jsx)("ul",{children:o.map((function(e){return Object(m.jsxs)("li",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{type:"button",onClick:function(){return c(e.id)},children:"Delete"})]},e.id)}))})},p=function(e){var n=e.query,t=e.onChange;return Object(m.jsxs)("div",{children:["filter: ",Object(m.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.onFormSubmit,t=e.newName,c=e.newNumber,o=e.onNameChange,r=e.onNumberChange;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:t,onChange:o})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:c,onChange:r})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n,t=e.message;return n=e.isError?{color:"Red"}:{color:"Green"},Object(m.jsx)("div",{style:n,children:Object(m.jsx)("p",{children:t})})},g=function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(i.useState)(""),s=Object(a.a)(o,2),b=s[0],d=s[1],g=Object(i.useState)(""),w=Object(a.a)(g,2),y=w[0],C=w[1],k=Object(i.useState)(""),S=Object(a.a)(k,2),N=S[0],D=S[1],q=Object(i.useState)(""),E=Object(a.a)(q,2),F=E[0],J=E[1],L=Object(i.useState)(!1),M=Object(a.a)(L,2),P=M[0],T=M[1],B=function(e){J(e),T(!1),setTimeout((function(){J("")}),3e3)};return Object(i.useEffect)((function(){j().then((function(e){c(e.data)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Phonebook"}),Object(m.jsx)(x,{message:F,isError:P}),Object(m.jsx)(p,{query:N,onChange:function(e){D(e.target.value)}}),Object(m.jsx)("h2",{children:"add new"}),Object(m.jsx)(v,{onFormSubmit:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(b)){if(window.confirm("".concat(b," is already added to the phonebook, would you like to replace old number with new one?"))){var n=t.find((function(e){return e.name===b})),o=Object(u.a)(Object(u.a)({},n),{},{number:y});h(o).then((function(){B("Successfully updated number for ".concat(b,"!"))})).catch((function(){var e;e="".concat(b," has already been removed from the phonebook. Please refresh the page"),J(e),T(!0),setTimeout((function(){J("")}),3e3)})),c(t.map((function(e){return e.id===o.id?o:e}))),d(""),C("")}}else{var a={name:b,number:y,id:Math.round(1e10*Math.random())};l(a).then((function(e){c([].concat(Object(r.a)(t),[a])),B("Successfully added ".concat(b," to phonebook!"))})),d(""),C("")}},newName:b,newNumber:y,onNameChange:function(e){d(e.target.value)},onNumberChange:function(e){C(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(O,{persons:t,query:N,onDeleteClick:function(e){window.confirm("Delete ".concat(t.find((function(n){return n.id===e})).name,"?"))&&(f(e),c(t.filter((function(n){return n.id!==e}))),B("Successfully deleted ".concat(t.find((function(n){return n.id===e})).name," from phonebook")))}})]})};o.a.render(Object(m.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.656c5793.chunk.js.map