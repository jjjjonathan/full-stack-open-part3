(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){"use strict";t.r(n);var o=t(17),r=t.n(o),c=t(18),u=t(8),a=t(3),i=t(1),s=t(5),d=t.n(s),b="/api/persons",j=function(){return d.a.get(b)},l=function(e){return d.a.post(b,e)},f=function(e){return d.a.delete("".concat(b,"/").concat(e))},h=function(e){return d.a.put("".concat(b,"/").concat(e.id),e)},m=t(0),O=function(e){var n=e.persons,t=e.query,o=e.onDeleteClick,r=t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):n;return Object(m.jsx)("ul",{children:r.map((function(e){return Object(m.jsxs)("li",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{type:"button",onClick:function(){return o(e.id)},children:"Delete"})]},e.id)}))})},p=function(e){var n=e.query,t=e.onChange;return Object(m.jsxs)("div",{children:["filter: ",Object(m.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.onFormSubmit,t=e.newName,o=e.newNumber,r=e.onNameChange,c=e.onNumberChange;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:t,onChange:r})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:o,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n,t=e.message;return n=e.isError?{color:"Red"}:{color:"Green"},Object(m.jsx)("div",{style:n,children:Object(m.jsx)("p",{children:t})})},g=function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],r=Object(i.useState)(""),s=Object(a.a)(r,2),d=s[0],b=s[1],g=Object(i.useState)(""),w=Object(a.a)(g,2),C=w[0],y=w[1],k=Object(i.useState)(""),S=Object(a.a)(k,2),N=S[0],D=S[1],q=Object(i.useState)(""),E=Object(a.a)(q,2),F=E[0],J=E[1],L=Object(i.useState)(!1),M=Object(a.a)(L,2),T=M[0],B=M[1],G=function(e){J(e),B(!1),setTimeout((function(){J("")}),3e3)},I=function(e){J(e),B(!0),setTimeout((function(){J("")}),3e3)};return Object(i.useEffect)((function(){j().then((function(e){o(e.data)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Phonebook"}),Object(m.jsx)(v,{message:F,isError:T}),Object(m.jsx)(p,{query:N,onChange:function(e){D(e.target.value)}}),Object(m.jsx)("h2",{children:"add new"}),Object(m.jsx)(x,{onFormSubmit:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(d)){if(window.confirm("".concat(d," is already added to the phonebook, would you like to replace old number with new one?"))){var n=t.find((function(e){return e.name===d})),r=Object(u.a)(Object(u.a)({},n),{},{number:C});h(r).then((function(){o(t.map((function(e){return e.id===r.id?r:e}))),G("Successfully updated number for ".concat(d,"!"))})).catch((function(e){console.error(e),console.error(e.response.data.error),I(e.response.data.error)})),b(""),y("")}}else{var a={name:d,number:C,id:Math.round(1e10*Math.random())};l(a).then((function(e){o([].concat(Object(c.a)(t),[a])),G("Successfully added ".concat(d," to phonebook!"))})).catch((function(e){console.error(e),console.error(e.response.data.error),I(e.response.data.error)})),b(""),y("")}},newName:d,newNumber:C,onNameChange:function(e){b(e.target.value)},onNumberChange:function(e){y(e.target.value)}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(O,{persons:t,query:N,onDeleteClick:function(e){window.confirm("Delete ".concat(t.find((function(n){return n.id===e})).name,"?"))&&(f(e),o(t.filter((function(n){return n.id!==e}))),G("Successfully deleted ".concat(t.find((function(n){return n.id===e})).name," from phonebook")))}})]})};r.a.render(Object(m.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.821c51f3.chunk.js.map